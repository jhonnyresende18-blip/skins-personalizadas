<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Skins Personalizadas • Plataforma Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');

:root{
  --neon:#00ffd5;
  --bg:#050505;
  --glass:rgba(255,255,255,.06);
  --border:rgba(255,255,255,.12);
  --text:#eaeaea;
  --muted:#9aa0a6;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Inter',sans-serif;
  background:
    radial-gradient(circle at top,#0f2027,#000),
    linear-gradient(135deg,#000,#050505);
  color:var(--text);
}

header{
  text-align:center;
  padding:40px 16px 30px;
}

header h1{
  margin:0;
  font-size:34px;
  font-weight:800;
  color:var(--neon);
  text-shadow:0 0 25px rgba(0,255,213,.4);
}

header p{
  margin-top:8px;
  font-size:15px;
  color:var(--muted);
}

.container{
  max-width:1200px;
  margin:30px auto;
  padding:0 16px;
}

.grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
  gap:26px;
}

.card{
  background:var(--glass);
  backdrop-filter:blur(14px);
  border:1px solid var(--border);
  border-radius:22px;
  padding:26px;
  box-shadow:
    0 20px 40px rgba(0,0,0,.45),
    inset 0 0 0 rgba(255,255,255,.05);
}

.card h2{
  margin-top:0;
  font-size:20px;
  font-weight:700;
}

input,button{
  width:100%;
  padding:14px;
  margin-top:12px;
  border-radius:14px;
  border:none;
  font-size:14px;
  font-family:'Inter',sans-serif;
}

input{
  background:rgba(0,0,0,.5);
  color:#fff;
  border:1px solid rgba(255,255,255,.15);
}

button{
  background:linear-gradient(135deg,var(--neon),#00bfa5);
  color:#000;
  font-weight:700;
  cursor:pointer;
  transition:.3s;
}

button:hover{
  transform:translateY(-2px);
  box-shadow:0 0 25px rgba(0,255,213,.6);
}

.preview{
  width:260px;
  height:260px;
  margin:20px auto;
  border-radius:50%;
  background:#000;
  background-size:cover;
  background-position:center;
  border:10px solid var(--neon);
  box-shadow:
    0 0 25px rgba(0,255,213,.7),
    inset 0 0 20px rgba(0,0,0,.6);
}

.effects label{
  display:block;
  font-size:12px;
  margin-top:12px;
  color:var(--muted);
}

.hidden{display:none}

footer{
  text-align:center;
  font-size:12px;
  color:#777;
  padding:40px 10px 30px;
}

a{color:var(--neon)}
</style>
</head>

<body>

<header>
  <h1>Skins Personalizadas</h1>
  <p>Crie skins premium com bordas neon e efeitos exclusivos</p>
</header>

<div class="container">

<!-- LOGIN -->
<div id="loginBox" class="card">
  <h2>Entrar / Criar Conta</h2>
  <input id="email" placeholder="Email">
  <input id="senha" type="password" placeholder="Senha (mín. 6 caracteres)">
  <button onclick="login()">Entrar</button>
</div>

<!-- APP -->
<div id="appBox" class="hidden">

<div class="grid">

<!-- EDITOR -->
<div class="card">
  <h2>Editor Premium</h2>

  <div id="preview" class="preview"></div>

  <input type="file" accept="image/png" onchange="carregarSkin(event)">

  <div class="effects">
    <label>Cor da borda</label>
    <input type="color" value="#00ffd5" onchange="mudarBorda(this.value)">

    <label>Espessura</label>
    <input type="range" min="4" max="30" value="10" onchange="mudarEspessura(this.value)">

    <label>Intensidade do glow</label>
    <input type="range" min="0" max="40" value="25" onchange="mudarGlow(this.value)">
  </div>

  <button onclick="salvarSkin()">Salvar Skin</button>
</div>

<!-- CONTA -->
<div class="card">
  <h2>Sua Conta</h2>
  <p>Créditos: <strong id="creditos">0</strong></p>
  <h3>Suas Skins</h3>
  <div id="skinsList"></div>
</div>

<!-- COMPRA -->
<div class="card">
  <h2>Comprar Créditos</h2>
  <p><strong>R$ 7,99</strong> • 10 edições premium</p>
  <p>
    PIX: <strong>jhonnyresende18@gmail.com</strong><br>
    Beneficiário: SkinsPersonalizadas
  </p>
  <button onclick="confirmarPagamento()">Confirmar pagamento</button>
</div>

</div>
</div>

<footer>
Skins Personalizadas não é afiliado ao Agar.io.<br>
Uso via link PNG.
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore,doc,setDoc,getDoc,addDoc,collection,serverTimestamp,getDocs,updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getStorage,ref,uploadString,getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

const firebaseConfig={
 apiKey:"AIzaSyBXRWZ-FEqZ4NI3AFtSXZu5XpvxdIuiN9U",
 authDomain:"skins-personalizadas.firebaseapp.com",
 projectId:"skins-personalizadas",
 storageBucket:"skins-personalizadas.firebasestorage.app",
 messagingSenderId:"987599508308",
 appId:"1:987599508308:web:112bfe0d4030d6666aaec1"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const db=getFirestore(app);
const storage=getStorage(app);

let currentImage=null;

window.login=async()=>{
 const email=document.getElementById("email").value;
 const senha=document.getElementById("senha").value;
 try{
  const c=await signInWithEmailAndPassword(auth,email,senha);
  loadUser(c.user);
 }catch{
  const c=await createUserWithEmailAndPassword(auth,email,senha);
  await setDoc(doc(db,"users",c.user.uid),{
    email,creditos:0,criadoEm:serverTimestamp()
  });
  loadUser(c.user);
 }
};

onAuthStateChanged(auth,u=>u&&loadUser(u));

async function loadUser(u){
 loginBox.classList.add("hidden");
 appBox.classList.remove("hidden");
 const snap=await getDoc(doc(db,"users",u.uid));
 if(snap.exists()) creditos.innerText=snap.data().creditos;
 carregarSkins(u.uid);
}

window.carregarSkin=e=>{
 const f=e.target.files[0];
 if(!f||f.type!=="image/png") return alert("Apenas PNG");
 const r=new FileReader();
 r.onload=()=>{
  currentImage=r.result;
  preview.style.backgroundImage=`url(${r.result})`;
 };
 r.readAsDataURL(f);
};

window.mudarBorda=c=>preview.style.borderColor=c;
window.mudarEspessura=v=>preview.style.borderWidth=v+"px";
window.mudarGlow=v=>preview.style.boxShadow=`0 0 ${v}px ${preview.style.borderColor}`;

window.salvarSkin=async()=>{
 const u=auth.currentUser;
 if(!u||!currentImage) return alert("Faça login e envie uma imagem");
 const snap=await getDoc(doc(db,"users",u.uid));
 if(snap.data().creditos<=0) return alert("Sem créditos");
 const id=Date.now();
 const refImg=ref(storage,`skins/${u.uid}/${id}.png`);
 await uploadString(refImg,currentImage,"data_url");
 const url=await getDownloadURL(refImg);
 await addDoc(collection(db,"skins"),{user:u.uid,url,criadoEm:serverTimestamp()});
 await updateDoc(doc(db,"users",u.uid),{creditos:snap.data().creditos-1});
 creditos.innerText=snap.data().creditos-1;
 carregarSkins(u.uid);
 alert("Skin salva! Use o link no Agar.io");
};

async function carregarSkins(uid){
 skinsList.innerHTML="";
 const q=await getDocs(collection(db,"skins"));
 q.forEach(d=>{
  const s=d.data();
  if(s.user===uid){
   skinsList.innerHTML+=`<p><a href="${s.url}" target="_blank">${s.url}</a></p>`;
  }
 });
}

window.confirmarPagamento=async()=>{
 const u=auth.currentUser;
 if(!u) return alert("Faça login");
 await addDoc(collection(db,"payments"),{
  user:u.uid,valor:7.99,status:"pendente",criadoEm:serverTimestamp()
 });
 alert("Pagamento enviado para verificação");
};
</script>

</body>
</html>

