<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Skins Personalizadas • Editor Studio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');

:root{
 --neon:#00ffd5;
 --bg:#050505;
 --glass:rgba(255,255,255,.07);
 --border:rgba(255,255,255,.15);
 --text:#f1f1f1;
 --muted:#aaa;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:'Inter',sans-serif;
 background:radial-gradient(circle at top,#0f2027,#000);
 color:var(--text);
}

header{
 text-align:center;
 padding:30px 16px;
}

header h1{
 margin:0;
 font-size:34px;
 font-weight:900;
 color:var(--neon);
 text-shadow:0 0 25px rgba(0,255,213,.6);
}

.container{
 max-width:1400px;
 margin:20px auto;
 padding:0 16px;
}

.grid{
 display:grid;
 grid-template-columns:380px 1fr;
 gap:24px;
}

.card{
 background:var(--glass);
 backdrop-filter:blur(16px);
 border:1px solid var(--border);
 border-radius:22px;
 padding:22px;
}

label{
 font-size:12px;
 color:var(--muted);
 display:block;
 margin-top:12px;
}

input,select,button{
 width:100%;
 padding:12px;
 margin-top:6px;
 border-radius:12px;
 border:none;
 font-size:14px;
}

input,select{
 background:#000;
 color:#fff;
 border:1px solid #333;
}

button{
 background:linear-gradient(135deg,var(--neon),#00bfa5);
 font-weight:800;
 cursor:pointer;
}

button:hover{
 box-shadow:0 0 25px rgba(0,255,213,.6);
}

canvas{
 width:460px;
 height:460px;
 max-width:100%;
 border-radius:50%;
 background:#000;
 display:block;
 margin:auto;
}

.toolbar button{
 margin-top:10px;
}

.layer{
 background:rgba(0,0,0,.4);
 border:1px solid #333;
 padding:8px;
 border-radius:10px;
 margin-top:8px;
 font-size:12px;
 cursor:pointer;
}

footer{
 text-align:center;
 font-size:12px;
 color:#777;
 padding:40px 10px;
}
</style>
</head>

<body>

<header>
 <h1>Editor Studio</h1>
</header>

<div class="container">
<div class="grid">

<!-- CONTROLES -->
<div class="card">
 <h2>Texto</h2>

 <label>Conteúdo</label>
 <input id="txt">

 <label>Fonte</label>
 <select id="font">
  <option>Inter</option>
  <option>Arial</option>
  <option>Impact</option>
 </select>

 <label>Cor</label>
 <input type="color" id="color" value="#ffffff">

 <label>Tamanho</label>
 <input type="range" min="20" max="120" value="48" id="size">

 <label>Curvatura</label>
 <input type="range" min="0" max="180" value="0" id="curve">

 <label>Glow</label>
 <input type="range" min="0" max="40" value="20" id="glow">

 <button onclick="addText()">Adicionar Texto</button>

 <hr style="margin:20px 0;border-color:rgba(255,255,255,.1)">

 <label>Imagem PNG</label>
 <input type="file" accept="image/png" onchange="loadImage(event)">

 <h2>Camadas</h2>
 <div id="layers"></div>
</div>

<!-- CANVAS -->
<div class="card">
 <canvas id="canvas" width="512" height="512"></canvas>

 <div class="toolbar">
  <button onclick="undo()">Undo</button>
  <button onclick="redo()">Redo</button>
  <button onclick="exportPNG()">Exportar PNG</button>
 </div>
</div>

</div>
</div>

<footer>
Skins Personalizadas • Editor Studio
</footer>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let history=[],redoStack=[];
let baseImg=null;
let layers=[];
let active=null;

function saveState(){
 history.push(JSON.stringify(layers));
 if(history.length>50) history.shift();
 redoStack=[];
}

function undo(){
 if(history.length){
  redoStack.push(JSON.stringify(layers));
  layers=JSON.parse(history.pop());
  draw();
 }
}

function redo(){
 if(redoStack.length){
  history.push(JSON.stringify(layers));
  layers=JSON.parse(redoStack.pop());
  draw();
 }
}

function loadImage(e){
 const f=e.target.files[0];
 if(!f||f.type!=="image/png") return;
 const r=new FileReader();
 r.onload=()=>{
  baseImg=new Image();
  baseImg.onload=draw;
  baseImg.src=r.result;
 };
 r.readAsDataURL(f);
}

function addText(){
 const layer={
  type:"text",
  text:txt.value,
  font:font.value,
  color:color.value,
  size:+size.value,
  curve:+curve.value,
  glow:+glow.value,
  x:256,y:256
 };
 layers.push(layer);
 active=layer;
 saveState();
 draw();
 renderLayers();
}

function draw(){
 ctx.clearRect(0,0,512,512);
 if(baseImg) ctx.drawImage(baseImg,0,0,512,512);
 layers.forEach(l=>{
  if(l.type==="text") drawText(l);
 });
}

function drawText(o){
 ctx.save();
 ctx.translate(o.x,o.y);
 ctx.font=`${o.size}px ${o.font}`;
 ctx.fillStyle=o.color;
 ctx.textAlign="center";
 ctx.shadowColor=o.color;
 ctx.shadowBlur=o.glow;

 if(o.curve===0){
  ctx.fillText(o.text,0,0);
 }else{
  const chars=o.text.split("");
  const radius=180;
  const angle=(o.curve*Math.PI/180)/chars.length;
  chars.forEach((c,i)=>{
   ctx.save();
   ctx.rotate(i*angle-angle*chars.length/2);
   ctx.fillText(c,0,-radius);
   ctx.restore();
  });
 }
 ctx.restore();
}

canvas.addEventListener("mousedown",e=>{
 const r=canvas.getBoundingClientRect();
 active=layers[layers.length-1];
 active.x=(e.clientX-r.left)*(512/r.width);
 active.y=(e.clientY-r.top)*(512/r.height);
 draw();
});

canvas.addEventListener("mousemove",e=>{
 if(active){
  const r=canvas.getBoundingClientRect();
  active.x=(e.clientX-r.left)*(512/r.width);
  active.y=(e.clientY-r.top)*(512/r.height);
  draw();
 }
});

canvas.addEventListener("mouseup",()=>active=null);

function renderLayers(){
 layersDiv.innerHTML="";
 layers.forEach((l,i)=>{
  layersDiv.innerHTML+=`<div class="layer">Texto ${i+1}</div>`;
 });
}

function exportPNG(){
 const a=document.createElement("a");
 a.href=canvas.toDataURL("image/png");
 a.download="skin-studio.png";
 a.click();
}
</script>

</body>
</html>
